(this["webpackJsonpaudio-browser-api-playground"]=this["webpackJsonpaudio-browser-api-playground"]||[]).push([[0],{50:function(e,t,n){e.exports={canvas:"styles_canvas__2Mk7O"}},61:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var o,c=n(0),r=n.n(c),a=n(30),i=n.n(a),u=(n(61),n(62),n(27)),s=n(43),l=n(15),d=n(17),b=n(75),j=n(74),f=n(25),O=n(21),p=Object(d.b)("counter/increment"),h=Object(d.b)("counter/decrement"),v=Object(d.b)("counter/reset"),g={value:0},x=Object(d.c)(g,(o={},Object(f.a)(o,p.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value+n})})),Object(f.a)(o,h.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value-n})})),Object(f.a)(o,v.type,(function(e){return Object(O.a)(Object(O.a)({},e),{},{value:g.value})})),o)),y=n(76),m=n(72),w=n(73),k=[function(e){return e.pipe(Object(y.a)(p.type),Object(m.a)((function(e){e.type,e.payload;return console.log("This log is triggered only by increment action thanks to epics :)")})),Object(w.a)())}],S=Object(l.b)({counter:x}),C=b.a.apply(void 0,Object(s.a)(k)),T=Object(j.a)(),M=Object(d.a)({reducer:S,devTools:!1,middleware:[T]});T.run(C);u.c;var R=n(52),P=n(2),A=n(29),N=n.n(A),B=n(47),E=n(8),H=n(50),D=n.n(H),I=n(4),L=function(){var e=Object(c.useState)(null),t=Object(E.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(),a=Object(E.a)(r,2),i=a[0],u=a[1],l=Object(c.useState)("stopped"),d=Object(E.a)(l,2),b=d[0],j=d[1],f=Object(c.useState)(),O=Object(E.a)(f,2),p=O[0],h=O[1],v=Object(c.useState)(),g=Object(E.a)(v,2),x=g[0],y=g[1],m=Object(c.useState)(),w=Object(E.a)(m,2),k=w[0],S=w[1],C=Object(c.useState)(100),T=Object(E.a)(C,1)[0],M=Object(c.useRef)(null),R=Object(c.useRef)(null),P=function(){var e=Object(B.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:t=e.sent,o(null),S(null),h(new AudioContext),y(new MediaRecorder(t));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=null===x||void 0===x?void 0:x.stream.getTracks();null===e||void 0===e||e.forEach((function(e){return e.stop()})),y(null),h(null)},H=function(){var e=Object(B.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(null),S(null),x){e.next=5;break}return console.error("Recorder not init"),e.abrupt("return");case 5:x.start();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){if(e){for(var t=e.getChannelData(0),n=Math.floor(t.length/T),o=[],c=0;c<T;c++){for(var r=n*c,a=0,i=0;i<n;i++)a+=Math.abs(t[r+i]);o.push(a/n)}console.log({filteredData:o}),S(o),setTimeout((function(){return U(o)}),0)}else console.error("No AudioBuffer")},U=function(e){if(null===R||void 0===R?void 0:R.current)if(e){var t=R.current;t.width=1*t.offsetWidth,t.height=1*(t.offsetHeight+40);var n=t.getContext("2d");if(n){n.scale(1,1),n.translate(0,t.offsetHeight/2+20),e=function(e){var t=Math.pow(Math.max.apply(Math,Object(s.a)(e)),-1);return e.map((function(e){return e*t}))}(e);for(var o=t.offsetWidth/e.length,c=0;c<e.length;c++){var r=o*c,a=e[c]*t.offsetHeight-20;a<0?a=0:a>t.offsetHeight/2&&(a=t.offsetHeight/2),F(n,r,a,o,!!((c+1)%2))}}else console.error("No canvas context")}else console.error("No audio data");else console.error("No canvas HTML element")},F=function(e,t,n,o,c){e.lineWidth=1,e.strokeStyle="#fff",e.beginPath(),n=c?n:-n,e.moveTo(t,0),e.lineTo(t,n),e.arc(t+o/2,n,o/2,Math.PI,0,c),e.lineTo(t+o,0),e.stroke()};return Object(c.useEffect)((function(){x&&p&&(console.log("Init recorder..."),x?(x.onstart=function(e){console.log("START recording..."),j("recording")},x.onpause=function(e){console.log("PAUSE recording..."),j("paused")},x.onresume=function(e){console.log("RESUME recording..."),j("recording")},x.onstop=function(e){console.log("STOP recording..."),j("stopped"),A()},x.ondataavailable=function(e){if("inactive"===x.state){var t=[];t.push(e.data);var n=new Blob(t,{type:e.data.type});if(o(URL.createObjectURL(n)),u(e.data.type),!p)return void console.log("No AudioContext");n.arrayBuffer().then((function(e){return p.decodeAudioData(e)})).then((function(e){console.log({audioBuffer:e}),L(e)}))}}):console.log("NO recorder"))}),[x,p]),Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Welcome to Audio Browser API Playground"}),!x&&Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:P,children:"New recording session"})}),x&&Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:A,children:"End recording session"})}),x&&Object(I.jsxs)("div",{children:["stopped"===b&&Object(I.jsx)("button",{onClick:H,children:"Rec"}),"recording"===b&&Object(I.jsx)("button",{onClick:function(){null===x||void 0===x||x.pause()},children:"Pause"}),"paused"===b&&Object(I.jsx)("button",{onClick:function(){null===x||void 0===x||x.resume()},children:"Resume"}),("recording"===b||"paused"===b)&&Object(I.jsx)("button",{onClick:function(){null===x||void 0===x||x.stop()},children:"Stop"}),"\xa0",Object(I.jsxs)("span",{children:[" Status: ",b]})]}),n&&Object(I.jsx)("div",{children:Object(I.jsx)("audio",{ref:M,controls:!0,children:Object(I.jsx)("source",{src:n,type:i})})}),k&&Object(I.jsx)("canvas",{ref:R,className:D.a.canvas})]})};var U=function(){return Object(I.jsx)(u.a,{store:M,children:Object(I.jsx)(R.a,{basename:"/audio-browser-api-playground",children:Object(I.jsx)(P.c,{children:Object(I.jsx)(P.a,{path:"/",element:Object(I.jsx)(L,{})})})})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),r(e),a(e)}))};i.a.render(Object(I.jsx)(r.a.StrictMode,{children:Object(I.jsx)(U,{})}),document.getElementById("root")),F()}},[[71,1,2]]]);
//# sourceMappingURL=main.52af5c69.chunk.js.map