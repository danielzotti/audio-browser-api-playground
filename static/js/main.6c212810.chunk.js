(this["webpackJsonpaudio-browser-api-playground"]=this["webpackJsonpaudio-browser-api-playground"]||[]).push([[0],{51:function(e,t,n){e.exports={canvas:"styles_canvas__2Mk7O"}},61:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var c,r=n(0),o=n.n(r),a=n(31),i=n.n(a),u=(n(61),n(62),n(27)),s=n(44),l=n(15),j=n(17),b=n(75),d=n(74),f=n(25),O=n(21),h=Object(j.b)("counter/increment"),p=Object(j.b)("counter/decrement"),v=Object(j.b)("counter/reset"),x={value:0},g=Object(j.c)(x,(c={},Object(f.a)(c,h.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value+n})})),Object(f.a)(c,p.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value-n})})),Object(f.a)(c,v.type,(function(e){return Object(O.a)(Object(O.a)({},e),{},{value:x.value})})),c)),y=n(76),m=n(72),k=n(73),w=[function(e){return e.pipe(Object(y.a)(h.type),Object(m.a)((function(e){e.type,e.payload;return console.log("This log is triggered only by increment action thanks to epics :)")})),Object(k.a)())}],C=Object(l.b)({counter:g}),S=b.a.apply(void 0,Object(s.a)(w)),T=Object(d.a)(),M=Object(j.a)({reducer:C,devTools:!1,middleware:[T]});T.run(S);var P=u.c,R=n(28),A=n(3),B=n(30),H=n.n(B),N=n(48),D=n(8),F=n(51),L=n.n(F),I=n(1),W=function(){var e=Object(r.useState)(null),t=Object(D.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(),a=Object(D.a)(o,2),i=a[0],u=a[1],l=Object(r.useState)("stopped"),j=Object(D.a)(l,2),b=j[0],d=j[1],f=Object(r.useState)(),O=Object(D.a)(f,2),h=O[0],p=O[1],v=Object(r.useState)(),x=Object(D.a)(v,2),g=x[0],y=x[1],m=Object(r.useState)(),k=Object(D.a)(m,2),w=k[0],C=k[1],S=Object(r.useState)(100),T=Object(D.a)(S,1)[0],M=Object(r.useRef)(null),P=Object(r.useRef)(null),R=function(){var e=Object(N.a)(H.a.mark((function e(){var t,n;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=navigator.mediaDevices.getUserMedia({audio:!0}),e.next=3,t;case 3:n=e.sent,y(new MediaRecorder(n)),p(new AudioContext);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(N.a)(H.a.mark((function e(){return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c(null),C(void 0),g){e.next=8;break}return console.error("Recorder not init"),e.next=6,R();case 6:if(g){e.next=8;break}return e.abrupt("return");case 8:g.ondataavailable=function(e){if("inactive"===g.state){var t=[];t.push(e.data);var n=new Blob(t,{type:e.data.type});if(c(URL.createObjectURL(n)),u(e.data.type),!h)return void console.log("No AudioContext");n.arrayBuffer().then((function(e){return h.decodeAudioData(e)})).then((function(e){console.log({audioBuffer:e}),B(e)}))}},console.log("START recording..."),g.start(),d("recording");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){if(e){for(var t=e.getChannelData(0),n=Math.floor(t.length/T),c=[],r=0;r<T;r++){for(var o=n*r,a=0,i=0;i<n;i++)a+=Math.abs(t[o+i]);c.push(a/n)}console.log({filteredData:c}),C(c),setTimeout((function(){return F(c)}),0)}else console.error("No AudioBuffer")},F=function(e){if(null===P||void 0===P?void 0:P.current)if(e){var t=P.current,n=window.devicePixelRatio||1;t.width=t.offsetWidth*n,t.height=(t.offsetHeight+40)*n;var c=t.getContext("2d");if(c){c.scale(n,n),c.translate(0,t.offsetHeight/2+20),e=function(e){var t=Math.pow(Math.max.apply(Math,Object(s.a)(e)),-1);return e.map((function(e){return e*t}))}(e);for(var r=t.offsetWidth/e.length,o=0;o<e.length;o++){var a=r*o,i=e[o]*t.offsetHeight-20;i<0?i=0:i>t.offsetHeight/2&&(i=t.offsetHeight/2),W(c,a,i,r,!!((o+1)%2))}}else console.error("No canvas context")}else console.error("No audio data");else console.error("No canvas HTML element")},W=function(e,t,n,c,r){e.lineWidth=1,e.strokeStyle="#fff",e.beginPath(),n=r?n:-n,e.moveTo(t,0),e.lineTo(t,n),e.arc(t+c/2,n,c/2,Math.PI,0,r),e.lineTo(t+c,0),e.stroke()};return Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Welcome to Audio Browser API Playground"}),!g&&Object(I.jsx)("button",{onClick:R,children:"Activate recorder"}),g&&Object(I.jsxs)("div",{children:["stopped"===b&&Object(I.jsx)("button",{onClick:A,children:"Rec"}),"recording"===b&&Object(I.jsx)("button",{onClick:function(){g&&(g.pause(),d("paused"))},children:"Pause"}),"paused"===b&&Object(I.jsx)("button",{onClick:function(){g&&(g.resume(),d("recording"))},children:"Resume"}),("recording"===b||"paused"===b)&&Object(I.jsx)("button",{onClick:function(){console.log("STOP recording..."),g&&(g.stop(),d("stopped"))},children:"Stop"}),"\xa0",Object(I.jsxs)("span",{children:[" Status: ",b]})]}),n&&Object(I.jsx)("div",{children:Object(I.jsx)("audio",{ref:M,controls:!0,children:Object(I.jsx)("source",{src:n,type:i})})}),w&&Object(I.jsx)("canvas",{ref:P,className:L.a.canvas})]})},U=function(){return Object(I.jsx)(I.Fragment,{children:Object(I.jsx)(W,{})})},_=function(){return Object(I.jsxs)("ul",{children:[Object(I.jsx)("li",{children:Object(I.jsx)(R.b,{to:"/",children:"Home"})}),Object(I.jsx)("li",{children:Object(I.jsx)(R.b,{to:"counter",children:"Counter"})})]})},J=function(){var e=Object(u.b)(),t=P((function(e){return e.counter.value}));return Object(I.jsxs)("div",{children:[Object(I.jsxs)("h1",{children:["Counter Page ",t]}),Object(I.jsx)("button",{onClick:function(){return e(p({value:1}))},children:"-"}),Object(I.jsx)("button",{onClick:function(){return e(v())},children:"reset"}),Object(I.jsx)("button",{onClick:function(){return e(h({value:1}))},children:"+"})]})};var E=function(){return Object(I.jsx)(u.a,{store:M,children:Object(I.jsxs)(R.a,{basename:".",children:[Object(I.jsx)(_,{}),Object(I.jsxs)(A.c,{children:[Object(I.jsx)(A.a,{path:"/",element:Object(I.jsx)(U,{})}),Object(I.jsx)(A.a,{path:"counter",element:Object(I.jsx)(J,{})})]})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))};i.a.render(Object(I.jsx)(o.a.StrictMode,{children:Object(I.jsx)(E,{})}),document.getElementById("root")),q()}},[[71,1,2]]]);
//# sourceMappingURL=main.6c212810.chunk.js.map