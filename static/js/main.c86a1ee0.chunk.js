(this["webpackJsonpaudio-browser-api-playground"]=this["webpackJsonpaudio-browser-api-playground"]||[]).push([[0],{50:function(e,t,n){e.exports={canvas:"styles_canvas__2Mk7O"}},61:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),o=n(30),i=n.n(o),s=(n(61),n(62),n(27)),u=n(43),l=n(15),d=n(17),b=n(75),j=n(74),f=n(25),O=n(21),p=Object(d.b)("counter/increment"),h=Object(d.b)("counter/decrement"),v=Object(d.b)("counter/reset"),g={value:0},x=Object(d.c)(g,(r={},Object(f.a)(r,p.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value+n})})),Object(f.a)(r,h.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value-n})})),Object(f.a)(r,v.type,(function(e){return Object(O.a)(Object(O.a)({},e),{},{value:g.value})})),r)),y=n(76),m=n(72),w=n(73),k=[function(e){return e.pipe(Object(y.a)(p.type),Object(m.a)((function(e){e.type,e.payload;return console.log("This log is triggered only by increment action thanks to epics :)")})),Object(w.a)())}],S=Object(l.b)({counter:x}),C=b.a.apply(void 0,Object(u.a)(k)),T=Object(j.a)(),M=Object(d.a)({reducer:S,devTools:!1,middleware:[T]});T.run(C);s.c;var R=n(52),A=n(2),P=n(29),B=n.n(P),H=n(47),N=n(8),D=n(50),L=n.n(D),F=n(4),I=function(){var e=Object(a.useState)(null),t=Object(N.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),o=Object(N.a)(c,2),i=o[0],s=o[1],l=Object(a.useState)("stopped"),d=Object(N.a)(l,2),b=d[0],j=d[1],f=Object(a.useState)(),O=Object(N.a)(f,2),p=O[0],h=O[1],v=Object(a.useState)(),g=Object(N.a)(v,2),x=g[0],y=g[1],m=Object(a.useState)(),w=Object(N.a)(m,2),k=w[0],S=w[1],C=Object(a.useState)(100),T=Object(N.a)(C,1)[0],M=Object(a.useRef)(null),R=Object(a.useRef)(null),A=function(){var e=Object(H.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=navigator.mediaDevices.getUserMedia({audio:!0}),e.next=3,t;case 3:n=e.sent,y(new MediaRecorder(n)),h(new AudioContext);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(H.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r(null),S(void 0),x){e.next=8;break}return console.error("Recorder not init"),e.next=6,A();case 6:if(x){e.next=8;break}return e.abrupt("return");case 8:x.ondataavailable=function(e){if("inactive"===x.state){var t=[];t.push(e.data);var n=new Blob(t,{type:e.data.type});if(r(URL.createObjectURL(n)),s(e.data.type),!p)return void console.log("No AudioContext");n.arrayBuffer().then((function(e){return p.decodeAudioData(e)})).then((function(e){console.log({audioBuffer:e}),D(e)}))}},console.log("START recording..."),x.start(),j("recording");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){if(e){for(var t=e.getChannelData(0),n=Math.floor(t.length/T),r=[],a=0;a<T;a++){for(var c=n*a,o=0,i=0;i<n;i++)o+=Math.abs(t[c+i]);r.push(o/n)}console.log({filteredData:r}),S(r),setTimeout((function(){return I(r)}),0)}else console.error("No AudioBuffer")},I=function(e){if(null===R||void 0===R?void 0:R.current)if(e){var t=R.current;t.width=1*t.offsetWidth,t.height=1*(t.offsetHeight+40);var n=t.getContext("2d");if(n){n.scale(1,1),n.translate(0,t.offsetHeight/2+20),e=function(e){var t=Math.pow(Math.max.apply(Math,Object(u.a)(e)),-1);return e.map((function(e){return e*t}))}(e);for(var r=t.offsetWidth/e.length,a=0;a<e.length;a++){var c=r*a,o=e[a]*t.offsetHeight-20;o<0?o=0:o>t.offsetHeight/2&&(o=t.offsetHeight/2),W(n,c,o,r,!!((a+1)%2))}}else console.error("No canvas context")}else console.error("No audio data");else console.error("No canvas HTML element")},W=function(e,t,n,r,a){e.lineWidth=1,e.strokeStyle="#fff",e.beginPath(),n=a?n:-n,e.moveTo(t,0),e.lineTo(t,n),e.arc(t+r/2,n,r/2,Math.PI,0,a),e.lineTo(t+r,0),e.stroke()};return Object(F.jsxs)("div",{children:[Object(F.jsx)("h1",{children:"Welcome to Audio Browser API Playground"}),!x&&Object(F.jsx)("button",{onClick:A,children:"Activate recorder"}),x&&Object(F.jsxs)("div",{children:["stopped"===b&&Object(F.jsx)("button",{onClick:P,children:"Rec"}),"recording"===b&&Object(F.jsx)("button",{onClick:function(){x&&(x.pause(),j("paused"))},children:"Pause"}),"paused"===b&&Object(F.jsx)("button",{onClick:function(){x&&(x.resume(),j("recording"))},children:"Resume"}),("recording"===b||"paused"===b)&&Object(F.jsx)("button",{onClick:function(){console.log("STOP recording..."),x&&(x.stop(),j("stopped"))},children:"Stop"}),"\xa0",Object(F.jsxs)("span",{children:[" Status: ",b]})]}),n&&Object(F.jsx)("div",{children:Object(F.jsx)("audio",{ref:M,controls:!0,children:Object(F.jsx)("source",{src:n,type:i})})}),k&&Object(F.jsx)("canvas",{ref:R,className:L.a.canvas})]})};var W=function(){return Object(F.jsx)(s.a,{store:M,children:Object(F.jsx)(R.a,{basename:"/audio-browser-api-playground",children:Object(F.jsx)(A.c,{children:Object(F.jsx)(A.a,{path:"/",element:Object(F.jsx)(I,{})})})})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};i.a.render(Object(F.jsx)(c.a.StrictMode,{children:Object(F.jsx)(W,{})}),document.getElementById("root")),U()}},[[71,1,2]]]);
//# sourceMappingURL=main.c86a1ee0.chunk.js.map