(this["webpackJsonpaudio-browser-api-playground"]=this["webpackJsonpaudio-browser-api-playground"]||[]).push([[0],{50:function(e,t,n){e.exports={canvas:"styles_canvas__2Mk7O"}},61:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);var o,c=n(0),r=n.n(c),a=n(30),i=n.n(a),s=(n(61),n(62),n(27)),u=n(43),l=n(15),d=n(17),b=n(75),j=n(74),f=n(25),O=n(21),p=Object(d.b)("counter/increment"),v=Object(d.b)("counter/decrement"),h=Object(d.b)("counter/reset"),g={value:0},x=Object(d.c)(g,(o={},Object(f.a)(o,p.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value+n})})),Object(f.a)(o,v.type,(function(e,t){var n=t.payload.value;return Object(O.a)(Object(O.a)({},e),{},{value:e.value-n})})),Object(f.a)(o,h.type,(function(e){return Object(O.a)(Object(O.a)({},e),{},{value:g.value})})),o)),m=n(76),y=n(72),k=n(73),w=[function(e){return e.pipe(Object(m.a)(p.type),Object(y.a)((function(e){e.type,e.payload;return console.log("This log is triggered only by increment action thanks to epics :)")})),Object(k.a)())}],S=Object(l.b)({counter:x}),C=b.a.apply(void 0,Object(u.a)(w)),T=Object(j.a)(),M=Object(d.a)({reducer:S,devTools:!1,middleware:[T]});T.run(C);s.c;var R=n(52),A=n(2),P=n(29),B=n.n(P),D=n(47),H=n(8),N=n(50),E=n.n(N),L=n(4),U=function(){var e=Object(c.useState)(null),t=Object(H.a)(e,2),n=t[0],o=t[1],r=Object(c.useState)(),a=Object(H.a)(r,2),i=a[0],s=a[1],l=Object(c.useState)("stopped"),d=Object(H.a)(l,2),b=d[0],j=d[1],f=Object(c.useState)(),O=Object(H.a)(f,2),p=O[0],v=O[1],h=Object(c.useState)(),g=Object(H.a)(h,2),x=g[0],m=g[1],y=Object(c.useState)(),k=Object(H.a)(y,2),w=k[0],S=k[1],C=Object(c.useState)(100),T=Object(H.a)(C,1)[0],M=Object(c.useRef)(null),R=Object(c.useRef)(null),A=function(){var e=Object(D.a)(B.a.mark((function e(){var t,n;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=navigator.mediaDevices.getUserMedia({audio:!0}),e.next=3,t;case 3:n=e.sent,m(new MediaRecorder(n)),v(new AudioContext);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(D.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(null),S(void 0),x){e.next=5;break}return console.error("Recorder not init"),e.abrupt("return");case 5:x.onpause=function(e){console.log("PAUSE recording..."),j("paused")},x.onstop=function(e){console.log("STOP recording..."),j("stopped"),N()},x.onresume=function(e){console.log("RESUME recording..."),j("recording")},x.onstart=function(e){console.log("START recording..."),j("recording")},x.ondataavailable=function(e){if("inactive"===x.state){var t=[];t.push(e.data);var n=new Blob(t,{type:e.data.type});if(o(URL.createObjectURL(n)),s(e.data.type),!p)return void console.log("No AudioContext");n.arrayBuffer().then((function(e){return p.decodeAudioData(e)})).then((function(e){console.log({audioBuffer:e}),U(e)}))}},x.start();case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=null===x||void 0===x?void 0:x.stream.getTracks();console.log({tracks:e}),null===e||void 0===e||e.forEach((function(e){return e.stop()}))},U=function(e){if(e){for(var t=e.getChannelData(0),n=Math.floor(t.length/T),o=[],c=0;c<T;c++){for(var r=n*c,a=0,i=0;i<n;i++)a+=Math.abs(t[r+i]);o.push(a/n)}console.log({filteredData:o}),S(o),setTimeout((function(){return F(o)}),0)}else console.error("No AudioBuffer")},F=function(e){if(null===R||void 0===R?void 0:R.current)if(e){var t=R.current;t.width=1*t.offsetWidth,t.height=1*(t.offsetHeight+40);var n=t.getContext("2d");if(n){n.scale(1,1),n.translate(0,t.offsetHeight/2+20),e=function(e){var t=Math.pow(Math.max.apply(Math,Object(u.a)(e)),-1);return e.map((function(e){return e*t}))}(e);for(var o=t.offsetWidth/e.length,c=0;c<e.length;c++){var r=o*c,a=e[c]*t.offsetHeight-20;a<0?a=0:a>t.offsetHeight/2&&(a=t.offsetHeight/2),I(n,r,a,o,!!((c+1)%2))}}else console.error("No canvas context")}else console.error("No audio data");else console.error("No canvas HTML element")},I=function(e,t,n,o,c){e.lineWidth=1,e.strokeStyle="#fff",e.beginPath(),n=c?n:-n,e.moveTo(t,0),e.lineTo(t,n),e.arc(t+o/2,n,o/2,Math.PI,0,c),e.lineTo(t+o,0),e.stroke()};return Object(L.jsxs)("div",{children:[Object(L.jsx)("h1",{children:"Welcome to Audio Browser API Playground"}),!x&&Object(L.jsx)("div",{children:Object(L.jsx)("button",{onClick:A,children:"Activate media streaming"})}),x&&Object(L.jsx)("div",{children:Object(L.jsx)("button",{onClick:N,children:"Deactivate media streaming"})}),x&&Object(L.jsxs)("div",{children:["stopped"===b&&Object(L.jsx)("button",{onClick:P,children:"Rec"}),"recording"===b&&Object(L.jsx)("button",{onClick:function(){null===x||void 0===x||x.pause()},children:"Pause"}),"paused"===b&&Object(L.jsx)("button",{onClick:function(){null===x||void 0===x||x.resume()},children:"Resume"}),("recording"===b||"paused"===b)&&Object(L.jsx)("button",{onClick:function(){null===x||void 0===x||x.stop()},children:"Stop"}),"\xa0",Object(L.jsxs)("span",{children:[" Status: ",b]})]}),n&&Object(L.jsx)("div",{children:Object(L.jsx)("audio",{ref:M,controls:!0,children:Object(L.jsx)("source",{src:n,type:i})})}),w&&Object(L.jsx)("canvas",{ref:R,className:E.a.canvas})]})};var F=function(){return Object(L.jsx)(s.a,{store:M,children:Object(L.jsx)(R.a,{basename:"/audio-browser-api-playground",children:Object(L.jsx)(A.c,{children:Object(L.jsx)(A.a,{path:"/",element:Object(L.jsx)(U,{})})})})})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),c(e),r(e),a(e)}))};i.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(F,{})}),document.getElementById("root")),I()}},[[71,1,2]]]);
//# sourceMappingURL=main.f5e99a69.chunk.js.map